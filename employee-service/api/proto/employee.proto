syntax = "proto3";

package employee;

option go_package = "employee-service/api/proto;proto";

// EmployeeService предоставляет методы для работы с сотрудниками и университетами
service EmployeeService {
  // GetUniversityByID получает вуз по ID
  rpc GetUniversityByID(GetUniversityByIDRequest) returns (GetUniversityByIDResponse);
  
  // GetUniversityByINN получает вуз по ИНН
  rpc GetUniversityByINN(GetUniversityByINNRequest) returns (GetUniversityByINNResponse);
  
  // GetUniversityByINNAndKPP получает вуз по ИНН и КПП
  rpc GetUniversityByINNAndKPP(GetUniversityByINNAndKPPRequest) returns (GetUniversityByINNAndKPPResponse);
  
  // GetEmployeeByID получает сотрудника по ID
  rpc GetEmployeeByID(GetEmployeeByIDRequest) returns (GetEmployeeByIDResponse);
  
  // UpdateEmployeeByMaxID обновляет данные сотрудника по MAX ID
  rpc UpdateEmployeeByMaxID(UpdateEmployeeByMaxIDRequest) returns (UpdateEmployeeByMaxIDResponse);
}

message GetUniversityByIDRequest {
  int64 id = 1;
}

message GetUniversityByIDResponse {
  University university = 1;
  string error = 2;
}

message GetUniversityByINNRequest {
  string inn = 1;
}

message GetUniversityByINNResponse {
  University university = 1;
  string error = 2;
}

message GetUniversityByINNAndKPPRequest {
  string inn = 1;
  string kpp = 2;
}

message GetUniversityByINNAndKPPResponse {
  University university = 1;
  string error = 2;
}

message University {
  int64 id = 1;
  string name = 2;
  string inn = 3;
  string kpp = 4;
  string created_at = 5;
  string updated_at = 6;
}

message GetEmployeeByIDRequest {
  int64 id = 1;
}

message GetEmployeeByIDResponse {
  Employee employee = 1;
  string error = 2;
}

message Employee {
  int64 id = 1;
  string first_name = 2;
  string last_name = 3;
  string phone = 4;
  string role = 5;
  int64 university_id = 6;
  int64 max_id = 7;  // MAX platform user ID
}

message UpdateEmployeeByMaxIDRequest {
  int64 max_id = 1;
  string first_name = 2;
  string last_name = 3;
  string username = 4;
}

message UpdateEmployeeByMaxIDResponse {
  bool success = 1;
  string error = 2;
}