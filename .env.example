# =============================================================================
# Digital University MVP - Environment Configuration Template
# =============================================================================
# Copy this file to .env and modify values for your environment

# =============================================================================
# MAX API Configuration (MaxBot Service)
# =============================================================================
MAX_API_TOKEN=your-max-api-token-here
MOCK_MODE=true
MAXBOT_HTTP_PORT=8095

# =============================================================================
# Profile Cache Configuration (MaxBot Service)
# =============================================================================
# Redis configuration for profile caching
REDIS_ADDR=redis:6379
REDIS_PASSWORD=
REDIS_DB=1
PROFILE_TTL=720h

# =============================================================================
# Webhook Configuration (MaxBot Service)
# =============================================================================
# Webhook secret for MAX bot integration (optional for security)
WEBHOOK_SECRET=your-webhook-secret-here
# Webhook URL will be: http://your-domain:8095/webhook/max

# =============================================================================
# Monitoring & Alerts Configuration (MaxBot Service)
# =============================================================================
MONITORING_ENABLED=true
# Alert when profile quality drops below threshold (0.0-1.0)
PROFILE_QUALITY_ALERT_THRESHOLD=0.8
# Alert when webhook error rate exceeds threshold (0.0-1.0)
WEBHOOK_ERROR_ALERT_THRESHOLD=0.05

# =============================================================================
# Auth Service Configuration
# =============================================================================
# IMPORTANT: Change these secrets in production!
ACCESS_SECRET=your-super-secret-access-key
REFRESH_SECRET=your-super-secret-refresh-key
ACCESS_MINUTES=15
REFRESH_HOURS=168

# MAX Mini App Authentication
MAX_BOT_TOKEN=your-max-bot-token-here

# =============================================================================
# Database Configuration
# =============================================================================
# Auth Service Database
AUTH_DB_USER=postgres
AUTH_DB_PASSWORD=your-auth-db-password
AUTH_DB_NAME=postgres
AUTH_DB_PORT=5432

# Chat Service Database  
CHAT_DB_USER=chat_user
CHAT_DB_PASSWORD=your-chat-db-password
CHAT_DB_NAME=chat_db
CHAT_DB_PORT=5434

# Employee Service Database
EMPLOYEE_DB_USER=employee_user
EMPLOYEE_DB_PASSWORD=your-employee-db-password
EMPLOYEE_DB_NAME=employee_db
EMPLOYEE_DB_PORT=5433

# Structure Service Database
STRUCTURE_DB_USER=postgres
STRUCTURE_DB_PASSWORD=your-structure-db-password
STRUCTURE_DB_NAME=structure_db
STRUCTURE_DB_PORT=5435

# Migration Service Database
MIGRATION_DB_USER=postgres
MIGRATION_DB_PASSWORD=your-migration-db-password
MIGRATION_DB_NAME=migration_db
MIGRATION_DB_PORT=5436

# =============================================================================
# Service Ports Configuration
# =============================================================================
AUTH_SERVICE_PORT=8080
EMPLOYEE_SERVICE_PORT=8081
CHAT_SERVICE_PORT=8082
STRUCTURE_SERVICE_PORT=8083
MIGRATION_SERVICE_PORT=8084
MAXBOT_GRPC_PORT=9095

# =============================================================================
# Service Communication Configuration
# =============================================================================
AUTH_GRPC_ADDR=auth-service:9090
EMPLOYEE_GRPC_ADDR=employee-service:9091
CHAT_GRPC_ADDR=chat-service:9092
STRUCTURE_GRPC_ADDR=structure-service:9093
MAXBOT_GRPC_ADDR=maxbot-service:9095

CHAT_SERVICE_URL=http://chat-service:8082
STRUCTURE_SERVICE_URL=http://structure-service:8083

AUTH_TIMEOUT=5s
MAXBOT_TIMEOUT=5s
MAX_API_TIMEOUT=5s

# =============================================================================
# Profile Cache Integration (Employee Service)
# =============================================================================
PROFILE_CACHE_ENABLED=true
PROFILE_CACHE_TIMEOUT=3s

# =============================================================================
# Redis Configuration (Chat Service Participants Background Sync)
# =============================================================================
# Redis connection URL for participants caching
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis Automatic Reconnection Configuration
REDIS_MAX_RETRIES=5
REDIS_RETRY_DELAY=1s
REDIS_HEALTH_CHECK_INTERVAL=30s

# Participants Background Sync Configuration
PARTICIPANTS_CACHE_TTL=1h
PARTICIPANTS_UPDATE_INTERVAL=15m
PARTICIPANTS_FULL_UPDATE_HOUR=3
PARTICIPANTS_BATCH_SIZE=50
PARTICIPANTS_MAX_API_TIMEOUT=30s
PARTICIPANTS_STALE_THRESHOLD=1h
PARTICIPANTS_ENABLE_BACKGROUND_SYNC=true
PARTICIPANTS_ENABLE_LAZY_UPDATE=true
PARTICIPANTS_INTEGRATION_DISABLED=false

# =============================================================================
# Google Sheets Integration
# =============================================================================
GOOGLE_CREDENTIALS_PATH=/app/credentials/google-credentials.json
GOOGLE_SPREADSHEET_ID=

# =============================================================================
# General Configuration
# =============================================================================
LOG_LEVEL=info
DEV_MODE=true
DB_SSLMODE=disable