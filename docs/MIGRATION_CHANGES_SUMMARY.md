# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–π

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- auth-service
- employee-service  
- chat-service
- structure-service
- migration-service

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
```
internal/infrastructure/migration/
‚îú‚îÄ‚îÄ migrator.go                    # –õ–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π —Å golang-migrate
‚îî‚îÄ‚îÄ migrations/                    # Embedded SQL —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ 000001_init.up.sql
    ‚îú‚îÄ‚îÄ 000001_init.down.sql
    ‚îî‚îÄ‚îÄ ...
```

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã main.go —Ñ–∞–π–ª—ã

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ç–µ–ø–µ—Ä—å:
1. –ñ–¥–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î (–¥–æ 30 –ø–æ–ø—ã—Ç–æ–∫)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
3. –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–π
4. –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml

- –£–±—Ä–∞–Ω—ã volumes —Å `migrations-init` 
- –£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- –°–µ—Ä–≤–∏—Å—ã —Ç–µ–ø–µ—Ä—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã go.mod —Ñ–∞–π–ª—ã

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `github.com/golang-migrate/migrate/v4 v4.17.0` –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### üöÄ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ó–∞—â–∏—Ç–∞ –æ—Ç "–≥—Ä—è–∑–Ω—ã—Ö" —Å–æ—Å—Ç–æ—è–Ω–∏–π –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### üéØ –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –ù–µ –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–π —Å—Ä–µ–¥–µ (Docker, K8s, –ª–æ–∫–∞–ª—å–Ω–æ)
- –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
```bash
./test_migration_system.sh
```

### –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
make deploy
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
make logs-auth      # –õ–æ–≥–∏ auth-service
make logs-employee  # –õ–æ–≥–∏ employee-service
make logs           # –í—Å–µ –ª–æ–≥–∏
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
make ps            # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make health        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
make check-volumes # –°–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –†–∞–Ω—å—à–µ (docker-compose –º–∏–≥—Ä–∞—Ü–∏–∏)
1. –ó–∞–ø—É—Å–∫ –ë–î —Å init-—Å–∫—Ä–∏–ø—Ç–∞–º–∏
2. –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
4. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—è–¥–∫–æ–º –∑–∞–ø—É—Å–∫–∞

### –¢–µ–ø–µ—Ä—å (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
1. –ó–∞–ø—É—Å–∫ –ë–î
2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
3. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Å–∞–º –∂–¥–µ—Ç –ë–î –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
4. –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–æ  
- ‚úÖ –î–∞–Ω–Ω—ã–µ –≤ –ë–î –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
- ‚úÖ API endpoints –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å `./test_migration_system.sh`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å—Ç–∞—Ä—Ç—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–π –≤ production
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å README —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ